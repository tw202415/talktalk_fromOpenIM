import{e as d,o as s,$ as h,a0 as A,I as m,f as a,a as I,j as p}from"./index-9718ad5b.js";import{a as D}from"./@openim-a63ca2b1.js";import{m as g}from"./ahooks-0f0ed15d.js";import{r as c}from"./react-11ad9974.js";import{V as x}from"./react-virtuoso-e1d9e9c1.js";import{A as G}from"./index-cacc640d.js";import{u as R}from"./react-i18next-61ba1977.js";import"./dayjs-58c5dd90.js";import"./@babel-260269db.js";import"./i18next-c73dc616.js";import"./localforage-42b533ed.js";import"./electron-log-39892505.js";import"./react-dom-ad405c1c.js";import"./scheduler-765c72db.js";import"./react-query-c78ce74a.js";import"./react-router-dom-28f205e1.js";import"./react-router-e84d70e0.js";import"./@remix-run-1f835eaf.js";import"./classnames-c74120a4.js";import"./@emotion-c0b5c018.js";import"./stylis-5efc5547.js";import"./@ctrl-03fa0c70.js";import"./zustand-14da06db.js";import"./use-sync-external-store-0e343eac.js";import"./twemoji-540bbbe7.js";import"./axios-26ac709a.js";import"./uuid-4a60fe23.js";import"./mitt-f7ef348c.js";import"./date-fns-27ddccf6.js";import"./clsx-a2f71979.js";import"./react-image-file-resizer-3cc20154.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./scroll-into-view-if-needed-247ac2f3.js";import"./compute-scroll-into-view-ff36de3a.js";import"./throttle-debounce-87e7e444.js";import"./md5-ffbe311d.js";import"./crypt-5ea4a8e1.js";import"./charenc-bfd911d6.js";import"./is-buffer-793dba8c.js";import"./react-draggable-a9e3b63d.js";import"./prop-types-08c7c3df.js";import"./react-use-cc94cbd6.js";import"./copy-to-clipboard-5e8b3f9a.js";import"./toggle-selection-93f4ad84.js";import"./react-resizable-panels-2ebb3bd3.js";import"./xgplayer-ac1eb2ea.js";import"./lodash-es-039c886b.js";import"./@ckeditor-6ab12b32.js";import"./color-convert-d47c3cb3.js";import"./color-name-b7949e8c.js";import"./emoji-picker-element-ec9d8710.js";import"./tslib-b745fb4d.js";import"./lodash-858845ea.js";import"./intersection-observer-90e9e37b.js";import"./react-fast-compare-922b1222.js";const br=()=>{const{t:i}=R(),e=d(r=>r.selfInfo.userID),t=s(r=>r.recvGroupApplicationList),n=s(r=>r.sendGroupApplicationList),l=N(t.concat(n));g(()=>{const r=t.filter(o=>o.handleResult===D.Unprocessed).map(o=>"".concat(o.userID,"_").concat(o.reqTime));h(r).then(A)},[t]);const u=c.useCallback(async r=>{try{await m.acceptGroupApplication({groupID:r.groupID,fromUserID:r.userID,handleMsg:""})}catch(o){a({error:o})}},[]),f=c.useCallback(async r=>{try{await m.refuseGroupApplication({groupID:r.groupID,fromUserID:r.userID,handleMsg:""})}catch(o){a({error:o})}},[]);return I("div",{className:"flex h-full w-full flex-col bg-white",children:[p("p",{className:"m-5.5 text-base font-extrabold",children:i("placeholder.groupNotification")}),p("div",{className:"flex-1 pb-3",children:p(x,{className:"h-full overflow-x-hidden",data:l,itemContent:(r,o)=>p(G,{source:o,currentUserID:e,onAccept:u,onReject:f},"".concat(o.userID).concat(o.reqTime))})})]})},N=i=>(i.sort((e,t)=>e.handleResult===0&&t.handleResult===0?t.reqTime-e.reqTime:e.handleResult===0?-1:t.handleResult===0?1:0),i);export{br as GroupNotifications};
