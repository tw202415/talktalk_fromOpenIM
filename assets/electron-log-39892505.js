var y=Object.defineProperty;var F=(i,e,t)=>e in i?y(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var c=(i,e,t)=>(F(i,typeof e!="symbol"?e+"":e,t),t);import{g as S}from"./@babel-260269db.js";var v={exports:{}},D=m;function m(i){return Object.defineProperties(e,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof e.labelPadding){case"boolean":return e.labelPadding?e.maxLabelLength:0;case"number":return e.labelPadding;default:return 0}}}});function e(t){e.maxLabelLength=Math.max(e.maxLabelLength,t.length);const r={};for(const n of[...i.levels,"log"])r[n]=(...o)=>i.logData(o,{level:n,scope:t});return r}}const L=D,p=class p{constructor({allowUnknownLevel:e=!1,dependencies:t={},errorHandler:r,eventLogger:n,initializeFn:o,isDev:a=!1,levels:s=["error","warn","info","verbose","debug","silly"],logId:l,transportFactories:h={},variables:u}={}){c(this,"dependencies",{});c(this,"errorHandler",null);c(this,"eventLogger",null);c(this,"functions",{});c(this,"hooks",[]);c(this,"isDev",!1);c(this,"levels",null);c(this,"logId",null);c(this,"scope",null);c(this,"transports",{});c(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=e,this.dependencies=t,this.initializeFn=o,this.isDev=a,this.levels=s,this.logId=l,this.transportFactories=h,this.variables=u||{},this.scope=L(this),this.addLevel("log",!1);for(const f of this.levels)this.addLevel(f,!1);this.errorHandler=r,r==null||r.setOptions({...t,logFn:this.error}),this.eventLogger=n,n==null||n.setOptions({...t,logger:this});for(const[f,w]of Object.entries(h))this.transports[f]=w(this,t);p.instances[l]=this}static getInstance({logId:e}){return this.instances[e]||this.instances.default}addLevel(e,t=this.levels.length){t!==!1&&this.levels.splice(t,0,e),this[e]=(...r)=>this.logData(r,{level:e}),this.functions[e]=this[e]}catchErrors(e){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(e)}create(e){return typeof e=="string"&&(e={logId:e}),new p({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...e})}compareLevels(e,t,r=this.levels){const n=r.indexOf(e),o=r.indexOf(t);return o===-1||n===-1?!0:o<=n}initialize(e={}){this.initializeFn({logger:this,...this.dependencies,...e})}logData(e,t={}){this.processMessage({data:e,...t})}processMessage(e,{transports:t=this.transports}={}){if(e.cmd==="errorHandler"){this.errorHandler.handle(e.error,{errorName:e.errorName,processType:"renderer",showDialog:!!e.showDialog});return}let r=e.level;this.allowUnknownLevel||(r=this.levels.includes(e.level)?e.level:"info");const n={date:new Date,...e,level:r,variables:{...this.variables,...e.variables}};for(const[o,a]of this.transportEntries(t))if(!(typeof a!="function"||a.level===!1)&&this.compareLevels(a.level,e.level))try{const s=this.hooks.reduce((l,h)=>l&&h(l,a,o),n);s&&a({...s,data:[...s.data]})}catch(s){this.processInternalErrorFn(s)}}processInternalErrorFn(e){}transportEntries(e=this.transports){return(Array.isArray(e)?e:Object.entries(e)).map(r=>{switch(typeof r){case"string":return this.transports[r]?[r,this.transports[r]]:null;case"function":return[r.name,r];default:return Array.isArray(r)?r:null}}).filter(Boolean)}};c(p,"instances",{});let d=p;var E=d;const O=console.error;class x{constructor({logFn:e=null}={}){c(this,"logFn",null);c(this,"onError",null);c(this,"showDialog",!1);c(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=e}handle(e,{logFn:t=this.logFn,errorName:r="",onError:n=this.onError,showDialog:o=this.showDialog}={}){try{(n==null?void 0:n({error:e,errorName:r,processType:"renderer"}))!==!1&&t({error:e,errorName:r,showDialog:o})}catch(a){O(e)}}setOptions({logFn:e,onError:t,preventDefault:r,showDialog:n}){typeof e=="function"&&(this.logFn=e),typeof t=="function"&&(this.onError=t),typeof r=="boolean"&&(this.preventDefault=r),typeof n=="boolean"&&(this.showDialog=n)}startCatching({onError:e,showDialog:t}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:e,showDialog:t}),window.addEventListener("error",r=>{var n;this.preventDefault&&((n=r.preventDefault)==null||n.call(r)),this.handleError(r.error||r)}),window.addEventListener("unhandledrejection",r=>{var n;this.preventDefault&&((n=r.preventDefault)==null||n.call(r)),this.handleRejection(r.reason||r)}))}handleError(e){this.handle(e,{errorName:"Unhandled"})}handleRejection(e){const t=e instanceof Error?e:new Error(JSON.stringify(e));this.handle(t,{errorName:"Unhandled rejection"})}}var M=x,z=j;const g={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function j(i){return Object.assign(e,{format:"{h}:{i}:{s}.{ms}{scope} â€º {text}",formatDataFn({data:t=[],date:r=new Date,format:n=e.format,logId:o=i.logId,scope:a=i.scopeName,...s}){return typeof n=="function"?n({...s,data:t,date:r,logId:o,scope:a}):(typeof n!="string"||(t.unshift(n),typeof t[1]=="string"&&t[1].match(/%[1cdfiOos]/)&&(t=["".concat(t[0]," ").concat(t[1]),...t.slice(2)]),t[0]=t[0].replace(/\{(\w+)}/g,(l,h)=>{var u;switch(h){case"level":return s.level;case"logId":return o;case"scope":return a?" (".concat(a,")"):"";case"text":return"";case"y":return r.getFullYear().toString(10);case"m":return(r.getMonth()+1).toString(10).padStart(2,"0");case"d":return r.getDate().toString(10).padStart(2,"0");case"h":return r.getHours().toString(10).padStart(2,"0");case"i":return r.getMinutes().toString(10).padStart(2,"0");case"s":return r.getSeconds().toString(10).padStart(2,"0");case"ms":return r.getMilliseconds().toString(10).padStart(3,"0");case"iso":return r.toISOString();default:return((u=s.variables)==null?void 0:u[h])||l}}).trim()),t)},writeFn({message:{level:t,data:r}}){const n=g[t]||g.info;setTimeout(()=>n(...r))}});function e(t){e.writeFn({message:{...t,data:e.formatDataFn(t)}})}}var A=k;const I=new Set([Promise,WeakMap,WeakSet]);function k(i){return Object.assign(e,{depth:5,serializeFn(t,{depth:r=5,seen:n=new WeakSet}={}){return n.has(t)?"[Circular]":r<1?b(t)?t:Array.isArray(t)?"[Array]":"[".concat(typeof t,"]"):["function","symbol"].includes(typeof t)?t.toString():b(t)?t:I.has(t.constructor)?"[".concat(t.constructor.name,"]"):Array.isArray(t)?t.map(o=>e.serializeFn(o,{depth:r-1,seen:n})):t instanceof Date?t.toISOString():t instanceof Error?t.stack:t instanceof Map?new Map(Array.from(t).map(([o,a])=>[e.serializeFn(o,{depth:r-1,seen:n}),e.serializeFn(a,{depth:r-1,seen:n})])):t instanceof Set?new Set(Array.from(t).map(o=>e.serializeFn(o,{depth:r-1,seen:n}))):(n.add(t),Object.fromEntries(Object.entries(t).map(([o,a])=>[o,e.serializeFn(a,{depth:r-1,seen:n})])))}});function e(t){if(!window.__electronLog){i.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{__electronLog.sendToMain(e.serializeFn(t,{depth:e.depth}))}catch(r){i.transports.console({data:["electronLog.transports.ipc",r,"data:",t.data],level:"error"})}}}function b(i){return Object(i)!==i}(function(i){const e=E,t=M,r=z,n=A;i.exports=o(),i.exports.Logger=e,i.exports.default=i.exports;function o(){const a=new e({allowUnknownLevel:!0,errorHandler:new t,initializeFn:()=>{},logId:"default",transportFactories:{console:r,ipc:n},variables:{processType:"renderer"}});return a.errorHandler.setOptions({logFn({error:s,errorName:l,showDialog:h}){a.transports.console({data:[l,s].filter(Boolean),level:"error"}),a.transports.ipc({cmd:"errorHandler",error:{cause:s==null?void 0:s.cause,code:s==null?void 0:s.code,name:s==null?void 0:s.name,message:s==null?void 0:s.message,stack:s==null?void 0:s.stack},errorName:l,logId:a.logId,showDialog:h})}}),typeof window=="object"&&window.addEventListener("message",s=>{const{cmd:l,logId:h,...u}=s.data||{},f=e.getInstance({logId:h});l==="message"&&f.processMessage(u,{transports:["console"]})}),new Proxy(a,{get(s,l){return typeof s[l]<"u"?s[l]:(...h)=>a.logData(h,{level:l})}})}})(v);var R=v.exports;const H=R;var T=H;const _=S(T);export{_ as l};
